(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[24],{1787:(e,t,r)=>{"use strict";var n=r(2115),a=r(9035),s=r(1684);r(6690);var i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.D=function(e){let{children:t,defaultTranslationValues:r,formats:o,getMessageFallback:u,locale:l,messages:c,now:p,onError:d,timeZone:f}=e,h=n.useMemo(()=>a.createCache(),[l]),y=n.useMemo(()=>a.createIntlFormatters(h),[h]),_=n.useMemo(()=>({...a.initializeConfig({locale:l,defaultTranslationValues:r,formats:o,getMessageFallback:u,messages:c,now:p,onError:d,timeZone:f}),formatters:y,cache:h}),[h,r,o,y,u,l,c,p,d,f]);return i.default.createElement(s.IntlContext.Provider,{value:_},t)}},2252:()=>{},6690:(e,t,r)=>{"use strict";function n(e,t){var r=t&&t.cache?t.cache:u,n=t&&t.serializer?t.serializer:i;return(t&&t.strategy?t.strategy:function(e,t){var r,n,i=1===e.length?a:s;return r=t.cache.create(),n=t.serializer,i.bind(this,e,r,n)})(e,{cache:r,serializer:n})}function a(e,t,r,n){var a=null==n||"number"==typeof n||"boolean"==typeof n?n:r(n),s=t.get(a);return void 0===s&&(s=e.call(this,n),t.set(a,s)),s}function s(e,t,r){var n=Array.prototype.slice.call(arguments,3),a=r(n),s=t.get(a);return void 0===s&&(s=e.apply(this,n),t.set(a,s)),s}r.r(t),r.d(t,{memoize:()=>n,strategies:()=>l});var i=function(){return JSON.stringify(arguments)},o=function(){function e(){this.cache=Object.create(null)}return e.prototype.get=function(e){return this.cache[e]},e.prototype.set=function(e,t){this.cache[e]=t},e}(),u={create:function(){return new o}},l={variadic:function(e,t){var r,n;return r=t.cache.create(),n=t.serializer,s.bind(this,e,r,n)},monadic:function(e,t){var r,n;return r=t.cache.create(),n=t.serializer,a.bind(this,e,r,n)}}},8830:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var n=r(6038),a=r(2115),s=r(1787);function i(e){let{locale:t,...r}=e;if(!t)throw Error("Failed to determine locale in `NextIntlClientProvider`, please provide the `locale` prop explicitly.\n\nSee https://next-intl.dev/docs/configuration#locale");return a.createElement(s.D,(0,n._)({locale:t},r))}},9035:(e,t,r)=>{"use strict";var n=r(6690);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(".")}function s(e){return a(e.namespace,e.key)}function i(e){console.error(e)}function o(e,t){return n.memoize(e,{cache:{create:()=>({get:e=>t[e],set(e,r){t[e]=r}})},strategy:n.strategies.variadic})}function u(e,t){return o(function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new e(...r)},t)}t.createCache=function(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}},t.createIntlFormatters=function(e){return{getDateTimeFormat:u(Intl.DateTimeFormat,e.dateTime),getNumberFormat:u(Intl.NumberFormat,e.number),getPluralRules:u(Intl.PluralRules,e.pluralRules),getRelativeTimeFormat:u(Intl.RelativeTimeFormat,e.relativeTime),getListFormat:u(Intl.ListFormat,e.list),getDisplayNames:u(Intl.DisplayNames,e.displayNames)}},t.defaultGetMessageFallback=s,t.defaultOnError=i,t.initializeConfig=function(e){let{getMessageFallback:t,messages:r,onError:n,...a}=e;return{...a,messages:r,onError:n||i,getMessageFallback:t||s}},t.joinPath=a,t.memoFn=o},9642:(e,t,r)=>{"use strict";let n;function a(e){return{lang:(null==e?void 0:e.lang)??void 0,message:null==e?void 0:e.message,abortEarly:(null==e?void 0:e.abortEarly)??void 0,abortPipeEarly:(null==e?void 0:e.abortPipeEarly)??void 0}}function s(e,t,r,n,a){var s,i;let o=a&&"input"in a?a.input:r.value,u=(null==a?void 0:a.expected)??e.expects??null,l=(null==a?void 0:a.received)??function(e){var t,r;let n=typeof e;return"string"===n?`"${e}"`:"number"===n||"bigint"===n||"boolean"===n?`${e}`:"object"===n||"function"===n?(e&&(null==(r=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:r.name))??"null":n}(o),c={kind:e.kind,type:e.type,input:o,expected:u,received:l,message:`Invalid ${t}: ${u?`Expected ${u} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:null==a?void 0:a.path,issues:null==a?void 0:a.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},p="schema"===e.kind,d=(null==a?void 0:a.message)??e.message??(s=e.reference,void(i=c.lang))??(p?void c.lang:null)??n.message??void c.lang;d&&(c.message="function"==typeof d?d(c):d),p&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function i(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},a())}}r.d(t,{Gvj:()=>t5,TsN:()=>oL,t1V:()=>e6});var o,u,l,c,p,d=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function f(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function h(e,t){return!e["~run"]({value:t},{abortEarly:!0}).issues}function y(e){return{kind:"schema",type:"boolean",reference:y,expects:"boolean",async:!1,message:e,get"~standard"(){return i(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:s(this,"type",e,t),e}}}function _(e){return{kind:"schema",type:"function",reference:_,expects:"Function",async:!1,message:e,get"~standard"(){return i(this)},"~run"(e,t){return"function"==typeof e.value?e.typed=!0:s(this,"type",e,t),e}}}function b(e,t){return{kind:"schema",type:"loose_object",reference:b,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return i(this)},"~run"(e,t){var r;let n=e.value;if(n&&"object"==typeof n){for(let a in e.typed=!0,e.value={},this.entries){let i=this.entries[a];if(a in n||("exact_optional"===i.type||"optional"===i.type||"nullish"===i.type)&&void 0!==i.default){let s=a in n?n[a]:f(i),o=i["~run"]({value:s},t);if(o.issues){let i={type:"object",origin:"value",input:n,key:a,value:s};for(let t of o.issues)t.path?t.path.unshift(i):t.path=[i],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[a]=o.value}else if("exact_optional"!==i.type&&"optional"!==i.type&&"nullish"!==i.type&&(s(this,"key",e,t,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:n,key:a,value:n[a]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(let t in n)!(Object.hasOwn(n,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t)||t in this.entries||(e.value[t]=n[t])}else s(this,"type",e,t);return e}}}function m(e,t){return{kind:"schema",type:"nullish",reference:m,expects:`(${e.expects} | null | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return i(this)},"~run"(e,t){return(null===e.value||void 0===e.value)&&(void 0!==this.default&&(e.value=f(this,e,t)),null===e.value||void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function g(e){return{kind:"schema",type:"number",reference:g,expects:"number",async:!1,message:e,get"~standard"(){return i(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?s(this,"type",e,t):e.typed=!0,e}}}function v(e,t){return{kind:"schema",type:"optional",reference:v,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return i(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=f(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function w(e){return{kind:"schema",type:"string",reference:w,expects:"string",async:!1,message:e,get"~standard"(){return i(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:s(this,"type",e,t),e}}}function k(e,t,r){let n=e["~run"]({value:t},a(r));if(n.issues)throw new d(n.issues);return n.value}function E(e){return h(b({TelegramWebviewProxy:b({postEvent:_()})}),e)}var x=Object.defineProperty,S=(e,t,r)=>t in e?x(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t,r)=>S(e,"symbol"!=typeof t?t+"":t,r);function $(e,t){t||(t=[]);class r extends Error{constructor(...r){super(..."function"==typeof t?t(...r):"string"==typeof t?[t]:t||[]),this.name=e}}return Object.defineProperty(r,"name",{value:e}),[r,e=>e instanceof r]}let[j,C]=$("CancelledError","Promise was canceled"),[q,P]=$("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),T=Symbol("Resolved");function I(e){return Array.isArray(e)&&e[0]===T}function O(e,t){return e.reject=t.reject,e.abort=t.abort,e}let L=class e extends Promise{constructor(e,t){let r,n;super((a,s)=>{let i,o;"function"==typeof e?(i=e,o=t):o=e;let u=[],l=e=>(...t)=>{let r=e(...t);return u.forEach(e=>e()),r},c=new AbortController,{signal:p}=c;n=e=>{p.aborted||c.abort(e)};let d=()=>p.reason,f=e=>{let t=()=>{e(d())};p.addEventListener("abort",t,!0);let r=()=>{p.removeEventListener("abort",t,!0)};return u.push(r),r},h=l(e=>{a(e),n([T,e])});r=l(e=>{s(e),n(e)}),o||(o={});let{abortSignal:y,rejectOnAbort:_=!0}=o;if(y)if(y.aborted){let{reason:e}=y;if(_)return r(e);n(e)}else{let e=()=>{n(y.reason)};y.addEventListener("abort",e),u.push(()=>{y.removeEventListener("abort",e)})}_&&f(s);let{timeout:b}=o;if(b){let e=setTimeout(()=>{n(new q(b))},b);u.push(()=>{clearTimeout(e)})}let m=()=>p.aborted,g=()=>I(d()),v=()=>{let e=d();return I(e)?e[1]:void 0};try{let e=i&&i(h,r,{abortReason:d,abortSignal:p,isAborted:m,isResolved:g,onAborted:f,onResolved:e=>f(()=>{g()&&e(v())}),resolved:v,throwIfAborted(){if(m())throw d()}});e instanceof Promise&&e.catch(r)}catch(e){r(e)}}),A(this,"abort"),A(this,"reject"),this.abort=n,this.reject=r}static fn(t,r){return new e(async(e,r,n)=>{try{e(await t(n))}catch(e){r(e)}},r)}static resolve(e){return this.fn(()=>e)}static reject(t){return new e((e,r)=>{r(t)})}cancel(){this.abort(new j)}catch(e){return this.then(void 0,e)}finally(e){return O(super.finally(e),this)}then(e,t){return O(super.then(e,t),this)}};function N(e){return`tapps/${e}`}function R(e){return{lang:(null==e?void 0:e.lang)??void 0,message:null==e?void 0:e.message,abortEarly:(null==e?void 0:e.abortEarly)??void 0,abortPipeEarly:(null==e?void 0:e.abortPipeEarly)??void 0}}function D(e,t,r,n,a){var s,i;let o=a&&"input"in a?a.input:r.value,u=(null==a?void 0:a.expected)??e.expects??null,l=(null==a?void 0:a.received)??function(e){var t,r;let n=typeof e;return"string"===n?`"${e}"`:"number"===n||"bigint"===n||"boolean"===n?`${e}`:"object"===n||"function"===n?(e&&(null==(r=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:r.name))??"null":n}(o),c={kind:e.kind,type:e.type,input:o,expected:u,received:l,message:`Invalid ${t}: ${u?`Expected ${u} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:null==a?void 0:a.path,issues:null==a?void 0:a.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},p="schema"===e.kind,d=(null==a?void 0:a.message)??e.message??(s=e.reference,void(i=c.lang))??(p?void c.lang:null)??n.message??void c.lang;d&&(c.message="function"==typeof d?d(c):d),p&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function M(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},R())}}function F(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}var V=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function B(e){return{kind:"transformation",type:"transform",reference:B,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function W(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function U(e){return{kind:"schema",type:"boolean",reference:U,expects:"boolean",async:!1,message:e,get"~standard"(){return M(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:D(this,"type",e,t),e}}}function z(e){return{kind:"schema",type:"lazy",reference:z,expects:"unknown",async:!1,getter:e,get"~standard"(){return M(this)},"~run"(e,t){return this.getter(e.value)["~run"](e,t)}}}function G(e,t){return{kind:"schema",type:"loose_object",reference:G,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return M(this)},"~run"(e,t){var r;let n=e.value;if(n&&"object"==typeof n){for(let a in e.typed=!0,e.value={},this.entries){let s=this.entries[a];if(a in n||("exact_optional"===s.type||"optional"===s.type||"nullish"===s.type)&&void 0!==s.default){let i=a in n?n[a]:W(s),o=s["~run"]({value:i},t);if(o.issues){let s={type:"object",origin:"value",input:n,key:a,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[a]=o.value}else if("exact_optional"!==s.type&&"optional"!==s.type&&"nullish"!==s.type&&(D(this,"key",e,t,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:n,key:a,value:n[a]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(let t in n)!F(n,t)||t in this.entries||(e.value[t]=n[t])}else D(this,"type",e,t);return e}}}function H(e){return{kind:"schema",type:"number",reference:H,expects:"number",async:!1,message:e,get"~standard"(){return M(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?D(this,"type",e,t):e.typed=!0,e}}}function J(e,t){return{kind:"schema",type:"optional",reference:J,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return M(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=W(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function Z(e){return{kind:"schema",type:"string",reference:Z,expects:"string",async:!1,message:e,get"~standard"(){return M(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:D(this,"type",e,t),e}}}function K(e){let t;if(e)for(let r of e)t?t.push(...r.issues):t=r.issues;return t}function Q(e,t){return{kind:"schema",type:"union",reference:Q,expects:function(e,t){let r=[...new Set(e)];return r.length>1?`(${r.join(" | ")})`:r[0]??"never"}(e.map(e=>e.expects),0),async:!1,options:e,message:t,get"~standard"(){return M(this)},"~run"(e,t){let r,n,a;for(let s of this.options){let i=s["~run"]({value:e.value},t);if(i.typed)if(i.issues)n?n.push(i):n=[i];else{r=i;break}else a?a.push(i):a=[i]}if(r)return r;if(n){if(1===n.length)return n[0];D(this,"type",e,t,{issues:K(n)}),e.typed=!0}else{if((null==a?void 0:a.length)===1)return a[0];D(this,"type",e,t,{issues:K(a)})}return e}}}function Y(e,t,r){let n=e["~run"]({value:t},R(r));if(n.issues)throw new V(n.issues);return n.value}function X(...e){return{...e[0],pipe:e,get"~standard"(){return M(this)},"~run"(t,r){for(let n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n["~run"](t,r))}return t}}}function ee(e){return B(t=>e?function e(t){let r=Object.entries(t).reduce((e,[t,r])=>(e[t.replace(/_[a-z]/g,e=>e[1].toUpperCase())]=r,e),{});for(let t in r){let n=r[t];!n||"object"!=typeof n||n instanceof Date||(r[t]=Array.isArray(n)?n.map(e):e(n))}return r}(t):t)}function et(e){return t=>X(e,ee(t))}function er(){return B(JSON.parse)}function en(e){let t=et(e);return e=>X(Z(),er(),t(e))}function ea(e){return t=>X(Q([Z(),function e(t,r){return{kind:"schema",type:"instance",reference:e,expects:t.name,async:!1,class:t,message:r,get"~standard"(){return M(this)},"~run"(e,t){return e.value instanceof this.class?e.typed=!0:D(this,"type",e,t),e}}}(URLSearchParams)]),B(t=>{let r={};return new URLSearchParams(t).forEach((e,t)=>{let n=r[t];Array.isArray(n)?n.push(e):void 0===n?r[t]=e:r[t]=[n,e]}),Y(e,r)}),ee(t))}let es=J(z(()=>ec())),ei=G({id:H(),photo_url:J(Z()),type:Z(),title:Z(),username:J(Z())}),eo=G({added_to_attachment_menu:J(U()),allows_write_to_pm:J(U()),first_name:Z(),id:H(),is_bot:J(U()),is_premium:J(U()),last_name:J(Z()),language_code:J(Z()),photo_url:J(Z()),username:J(Z())}),eu=G({auth_date:X(Z(),B(e=>new Date(1e3*Number(e))),function e(t){return{kind:"schema",type:"date",reference:e,expects:"Date",async:!1,message:t,get"~standard"(){return M(this)},"~run"(e,t){return e.value instanceof Date?isNaN(e.value)?D(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:D(this,"type",e,t),e}}}()),can_send_after:J(X(Z(),B(Number),function e(t){return{kind:"validation",type:"integer",reference:e,async:!1,expects:null,requirement:Number.isInteger,message:t,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&D(this,"integer",e,t),e}}}())),chat:J(z(()=>el())),chat_type:J(Z()),chat_instance:J(Z()),hash:Z(),query_id:J(Z()),receiver:es,start_param:J(Z()),signature:Z(),user:es}),el=en(ei),ec=en(eo),ep=ea(eu),ed=et(function e(t,r,n){return{kind:"schema",type:"record",reference:e,expects:"Object",async:!1,key:t,value:r,message:n,get"~standard"(){return M(this)},"~run"(e,t){var r,n;let a=e.value;if(a&&"object"==typeof a){for(let s in e.typed=!0,e.value={},a)if(F(a,s)){let i=a[s],o=this.key["~run"]({value:s},t);if(o.issues){let n={type:"object",origin:"key",input:a,key:s,value:i};for(let t of o.issues)t.path=[n],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}let u=this.value["~run"]({value:i},t);if(u.issues){let r={type:"object",origin:"value",input:a,key:s,value:i};for(let t of u.issues)t.path?t.path.unshift(r):t.path=[r],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=u.issues),t.abortEarly){e.typed=!1;break}}o.typed&&u.typed||(e.typed=!1),o.typed&&(e.value[o.value]=u.value)}}else D(this,"type",e,t);return e}}}(Z(),X(Q([Z(),H()]),B(e=>"number"==typeof e?`#${(0xffffff&e).toString(16).padStart(6,"0")}`:e),function e(t,r){return{kind:"validation",type:"check",reference:e,async:!1,expects:null,requirement:t,message:r,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&D(this,"input",e,t),e}}}(function(e){return/^#[\da-f]{6}$/i.test(e)})))),ef=J(X(Z(),B(e=>"1"===e))),eh=en(ed()),ey=ea(G({tgWebAppBotInline:ef,tgWebAppData:J(ep()),tgWebAppDefaultColors:J(eh()),tgWebAppFullscreen:ef,tgWebAppPlatform:Z(),tgWebAppShowSettings:ef,tgWebAppStartParam:J(Z()),tgWebAppThemeParams:eh(),tgWebAppVersion:Z()})),e_=(o=ey(),(e,t)=>Y(X(o,ee(t)),e)),eb=G({eventType:Z(),eventData:J(function e(){return{kind:"schema",type:"unknown",reference:e,expects:"unknown",async:!1,get"~standard"(){return M(this)},"~run":e=>(e.typed=!0,e)}}())});function em(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}let[eg,ev]=function(e,t){t||(t={});let{textColor:r,bgColor:n,shouldLog:a}=t,s=void 0===a||a,i="boolean"==typeof s?()=>s:s;function o(t,a,...s){if(a||i()){let a="font-weight:bold;padding:0 5px;border-radius:5px";console[t](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %c${e}`,`${a};background-color: lightblue;color:black`,"",`${a};${r?`color:${r};`:""}${n?`background-color:${n}`:""}`,...s)}}return[o.bind(void 0,"log"),o.bind(void 0,"error")]}("Bridge",{bgColor:"#9147ff",textColor:"white",shouldLog:()=>!1}),ew={clipboard_text_received:b({req_id:w(),data:m(w())}),custom_method_invoked:b({req_id:w(),result:v(function e(){return{kind:"schema",type:"unknown",reference:e,expects:"unknown",async:!1,get"~standard"(){return i(this)},"~run":e=>(e.typed=!0,e)}}()),error:v(w())}),popup_closed:m(b({button_id:m(w(),()=>{})}),{}),viewport_changed:b({height:g(),width:m(g(),()=>window.innerWidth),is_state_stable:y(),is_expanded:y()}),theme_changed:b({theme_params:ed()})};function ek(e){let t;if(e.source!==window.parent)return;try{t=k(function(...e){return{...e[0],pipe:e,get"~standard"(){return i(this)},"~run"(t,r){for(let n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n["~run"](t,r))}return t}}}(w(),er(),eb),e.data)}catch{return}let{eventType:r,eventData:n}=t,a=ew[r];try{let e=a?k(a,n):n;eS(r,e)}catch(e){ev(!0,[`An error occurred processing the "${r}" event from the Telegram application.`,"Please, file an issue here:","https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose"].join(`
`),t,e)}}let[eE,ex,eS,eA]=function(e,t){var r;let n={all:r=r||new Map,on:function(e,t){var n=r.get(e);n?n.push(t):r.set(e,[t])},off:function(e,t){var n=r.get(e);n&&(t?n.splice(n.indexOf(t)>>>0,1):r.set(e,[]))},emit:function(e,t){var n=r.get(e);n&&n.slice().map(function(e){e(t)}),(n=r.get("*"))&&n.slice().map(function(r){r(e,t)})}},a=new Map,s=(e,r,s)=>{s||(s=!1);let i=a.get(e)||new Map;a.set(e,i);let o=i.get(r)||[];i.set(r,o);let u=o.findIndex(e=>e[1]===s);u>=0&&(n.off(e,o[u][0]),o.splice(u,1),o.length||i.delete(r),i.size||(a.delete(e),a.size||t()))};return[function(t,r,i){function o(){s(t,r,i)}function u(...e){i&&o(),"*"===t?r(e):r(...e)}a.size||e(),n.on(t,u);let l=a.get(t)||new Map;a.set(t,l);let c=l.get(r)||[];return l.set(r,c),c.push([u,i||!1]),o},s,n.emit,function(){let e=n.all.size;n.all.clear(),a.clear(),e&&t()}]}(()=>{let e=window,t={receiveEvent:em};e.TelegramGameProxy_receiveEvent=em,e.TelegramGameProxy=t,e.Telegram={WebView:t},window.addEventListener("message",ek)},()=>{["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]}),window.removeEventListener("message",ek)});var e$=Object.defineProperty,ej=(e,t,r)=>t in e?e$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eC=(e,t,r)=>ej(e,t+"",r);function eq(e){return t=>t instanceof e}function eP(e,t){t||(t=[]);class r extends Error{constructor(...r){super(..."function"==typeof t?t(...r):"string"==typeof t?[t]:t||[]),this.name=e}}return Object.defineProperty(r,"name",{value:e}),[r,eq(r)]}let[eT,eI]=eP("MethodUnsupportedError",(e,t)=>[`Method "${e}" is unsupported in Mini Apps version ${t}`]),[eO,eL]=eP("MethodParameterUnsupportedError",(e,t,r)=>[`Parameter "${t}" of "${e}" method is unsupported in Mini Apps version ${r}`]),[eN,eR]=function(e,t,r){class n extends eP(e,r)[0]{constructor(...e){super(...e),eC(this,"data"),this.data=t(...e)}}return Object.defineProperty(n,"name",{value:e}),[n,eq(n)]}("LaunchParamsRetrieveError",e=>({errors:e}),e=>[["Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?","\uD83D\uDCD6 Refer to docs for more information:","https://docs.telegram-mini-apps.com/packages/telegram-apps-bridge/environment","","Collected errors:",...e.map(([e,t])=>`Source: ${e} / ${t instanceof Error?t.message:String(t)}`)].join(`
`)]),[eD,eM]=eP("InvalidLaunchParamsError",(e,t)=>[`Invalid value for launch params: ${e}`,{cause:t}]),[eF,eV]=eP("UnknownEnvError"),[eB,eW]=eP("InvokeCustomMethodError",e=>[`Server returned error: ${e}`]);function eU(e,t){t||(t={});let r=t.equals||Object.is,n=[],a=e,s=e=>{if(!r(a,e)){let t=a;a=e,[...n].forEach(([r,n])=>{r(e,t),n&&o(r,!0)})}};function i(e){let t="object"!=typeof e?{once:e}:e;return{once:t.once||!1,signal:t.signal||!1}}let o=(e,t)=>{let r=i(t),a=n.findIndex(([t,n])=>t===e&&n.once===r.once&&n.signal===r.signal);a>=0&&n.splice(a,1)},u=Object.assign(function(){var e;return e=u,ez.length&&ez[ez.length-1].add(e),a},{destroy(){n=[]},set:s,reset(){s(e)},sub:(e,t)=>(n.push([e,i(t)]),()=>o(e,t)),unsub:o,unsubAll(){n=n.filter(e=>e[1].signal)}});return u}let ez=[],eG=eU((...e)=>window.parent.postMessage(...e)),eH=(...e)=>eG()(...e),eJ=eU("https://web.telegram.org");function eZ(e,t){eg(!1,"Posting event:",t?{eventType:e,eventData:t}:{eventType:e});let r=window,n=JSON.stringify({eventType:e,eventData:t});if(function(){try{return window.self!==window.top}catch{return!0}}())return eH(n,eJ());if(E(r))return void r.TelegramWebviewProxy.postEvent(e,JSON.stringify(t));if(h(b({external:b({notify:_()})}),r))return void r.external.notify(n);throw new eF}function eK(e,t,r){r||(r={});let{capture:n}=r,[a,s]=function(){let e=[].flat(1);return[e.push.bind(e),()=>{e.forEach(e=>{e()})}]}();return new L(s=>{(Array.isArray(t)?t:[t]).forEach(e=>{a(eE(e,r=>{(!n||(Array.isArray(t)?n({event:e,payload:r}):n(r)))&&s(r)}))}),(r.postEvent||eZ)(e,r.params)},r).finally(s)}let eQ="launchParams";function eY(e){return e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&")}function eX(){let e=[];for(let[n,a]of[[()=>eY(window.location.href),"window.location.href"],[()=>{let e=performance.getEntriesByType("navigation")[0];return e&&eY(e.name)},"performance navigation entries"],[()=>(function(e){let t=sessionStorage.getItem(N(e));try{return t?JSON.parse(t):void 0}catch{}})(eQ),"local storage"]]){let s=n();if(!s){e.push([a,Error("Source is empty")]);continue}if(function(e){try{var t;return t=ey(),!t["~run"]({value:e},{abortEarly:!0}).issues}catch{return!1}}(s)){var t,r;return t=eQ,r=s,sessionStorage.setItem(N(t),JSON.stringify(r)),s}try{e_(s)}catch(t){e.push([a,t])}}throw new eN(e)}function e0(e){let t=e_(eX());return e?function e(t){let r=Object.entries(t).reduce((e,[t,r])=>(e[t.replace(/_[a-z]/g,e=>e[1].toUpperCase())]=r,e),{});for(let t in r){let n=r[t];!n||"object"!=typeof n||n instanceof Date||(r[t]=Array.isArray(n)?n.map(e):e(n))}return r}(t):t}function e1(e,t){if(!e)try{return e0(),!0}catch{return!1}return L.fn(async e=>{if(E(window))return!0;try{return await eK("web_app_request_theme","theme_changed",e),!0}catch{return!1}},t||{timeout:100})}function e6(){return new URLSearchParams(eX()).get("tgWebAppData")||void 0}function e2(e){return({req_id:t})=>t===e}function e3(e){return e.split(".").map(Number)}function e7(e,t){return 0>=function(e,t){let r=e3(e),n=e3(t),a=Math.max(r.length,n.length);for(let e=0;e<a;e+=1){let t=r[e]||0,a=n[e]||0;if(t!==a)return t>a?1:-1}return 0}(e,t)}function e4(e,t,r){if("string"==typeof r){if("web_app_open_link"===e){if("try_instant_view"===t)return e7("6.4",r);if("try_browser"===t)return e7("7.6",r)}if("web_app_set_header_color"===e&&"color"===t)return e7("6.9",r);if("web_app_close"===e&&"return_back"===t)return e7("7.6",r);if("web_app_setup_main_button"===e&&"has_shine_effect"===t)return e7("7.10",r)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return e7("6.1",t);case"web_app_open_popup":return e7("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return e7("6.4",t);case"web_app_switch_inline_query":return e7("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return e7("6.9",t);case"web_app_setup_settings_button":return e7("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return e7("7.2",t);case"web_app_setup_swipe_behavior":return e7("7.7",t);case"web_app_share_to_story":return e7("7.8",t);case"web_app_setup_secondary_button":case"web_app_set_bottom_bar_color":return e7("7.10",t);case"web_app_request_safe_area":case"web_app_request_content_safe_area":case"web_app_request_fullscreen":case"web_app_exit_fullscreen":case"web_app_set_emoji_status":case"web_app_add_to_home_screen":case"web_app_check_home_screen":case"web_app_request_emoji_status_access":case"web_app_check_location":case"web_app_open_location_settings":case"web_app_request_file_download":case"web_app_request_location":case"web_app_send_prepared_message":case"web_app_start_accelerometer":case"web_app_start_device_orientation":case"web_app_start_gyroscope":case"web_app_stop_accelerometer":case"web_app_stop_device_orientation":case"web_app_stop_gyroscope":case"web_app_toggle_orientation_lock":return e7("8.0",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function e5(e){return e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function e9(e){return`tapps/${e}`}function e8(e,t){sessionStorage.setItem(e9(e),JSON.stringify(t))}function te(e){let t=sessionStorage.getItem(e9(e));try{return t?JSON.parse(t):void 0}catch{}}function tt(...e){let t=e.flat(1);return[t.push.bind(t),()=>{t.forEach(e=>{e()})}]}function tr(){let e=performance.getEntriesByType("navigation")[0];return!!e&&"reload"===e.type}function tn(e){if(n)return e();n=new Map;try{e()}finally{n.forEach(e=>e()),n=void 0}}function ta(e,t){t||(t={});let r=t.equals||Object.is,a=[],s=e,i=e=>{if(!r(s,e)){var t;let r=s;s=e,t=()=>{[...a].forEach(([t,n])=>{t(e,r),n&&u(t,!0)})},n&&n.set(l,t)||t()}};function o(e){let t="object"!=typeof e?{once:e}:e;return{once:t.once||!1,signal:t.signal||!1}}let u=(e,t)=>{let r=o(t),n=a.findIndex(([t,n])=>t===e&&n.once===r.once&&n.signal===r.signal);n>=0&&a.splice(n,1)},l=Object.assign(function(){var e;return e=l,ts.length&&ts[ts.length-1].add(e),s},{destroy(){a=[]},set:i,reset(){i(e)},sub:(e,t)=>(a.push([e,o(t)]),()=>u(e,t)),unsub:u,unsubAll(){a=a.filter(e=>e[1].signal)}});return l}let ts=[];function ti(e,t){return function(e,t){let r=new Set,n;function a(){return n||(n=ta(i(),t))}function s(){a().set(i())}function i(){let t;r.forEach(e=>{e.unsub(s,{signal:!0})});let n=new Set;ts.push(n);try{t=e()}finally{ts.pop()}return n.forEach(e=>{e.sub(s,{signal:!0})}),r=n,t}return Object.assign(function(){return a()()},{destroy(){a().destroy()},sub:(...e)=>a().sub(...e),unsub(...e){a().unsub(...e)},unsubAll(...e){a().unsubAll(...e)}})}(e,t)}function to(e,t){let r=ta(e,t);return[r,ti(r)]}let[tu,,]=function(e,t){t||(t={});let{textColor:r,bgColor:n,shouldLog:a}=t,s=void 0===a||a,i="boolean"==typeof s?()=>s:s;function o(e,t,...a){if(t||i()){let t="font-weight:bold;padding:0 5px;border-radius:5px";console[e](`%c${Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(new Date)}%c / %cSDK`,`${t};background-color: lightblue;color:black`,"",`${t};${r?`color:${r};`:""}${n?`background-color:${n}`:""}`,...a)}}return[o.bind(void 0,"log"),o.bind(void 0,"error")]}(0,{bgColor:"forestgreen",textColor:"white",shouldLog:()=>!1}),tl=ta(0,void 0),tc=ta(eZ,void 0),[tp,td]=to({tgWebAppPlatform:"unknown",tgWebAppVersion:"0.0"}),tf=ti(()=>td().tgWebAppVersion);function th(){return tl.set(tl()+1),tl().toString()}function ty(e,t,r){var n;return n=th(),eK("web_app_invoke_custom_method","custom_method_invoked",{...{...r||{},postEvent:tb},params:{method:e,params:t,req_id:n},capture:e2(n)}).then(({result:e,error:t})=>{if(t)throw new eB(t);return e})}let t_=(e,t,r)=>(r||(r={}),r.postEvent||(r.postEvent=tb),eK(e,t,r)),tb=(e,t)=>tc()(e,t);function tm(e){return ti(()=>e4(e,tf()))}function tg(e,t){t||(t=[]);class r extends Error{constructor(...r){super(..."function"==typeof t?t(...r):"string"==typeof t?[t]:t||[]),this.name=e}}return Object.defineProperty(r,"name",{value:e}),[r,e=>e instanceof r]}function tv(e){return[e]}let[tw,tk]=tg("CSSVarsBoundError","CSS variables are already bound"),[tE,tx]=tg("NotAvailableError",tv),[tS,tA]=tg("InvalidEnvError",tv),[t$,tj]=tg("FunctionNotAvailableError",tv),[tC,tq]=tg("InvalidArgumentsError",(e,t)=>[e,{cause:t}]),[tP,tT]=tg("ConcurrentCallError",tv),[tI,tO]=tg("SetEmojiStatusError",e=>[`Failed to set emoji status: ${e}`]),[tL,tN]=tg("AccessDeniedError",tv),[tR,tD]=tg("FullscreenFailedError",tv),[tM,tF]=tg("ShareMessageError",tv);function tV(){return typeof window>"u"}function tB(e,t,r){let n;r||(r={});let{isSupported:a,isMounted:s,isMounting:i,component:o,supports:u}=r||{},l=`${o?`${o}.`:""}${e}()`,c=a?Array.isArray(a)||"object"==typeof a&&"any"in a?a:[a]:void 0;function p(e){if(u){let t=u[e];return e4(t[0],t[1],tf())}return!0}function d(){if(!c)return;let e=Array.isArray(c)?c:c.any,t=e.map(function(e){return"function"==typeof e?e():e4(e,tf())?void 0:`it is unsupported in Mini Apps version ${tf()}`}).filter(Boolean);return Array.isArray(c)?t[0]:t.length===e.length?t[t.length-1]:void 0}if(u)for(let e in n={},u)n[e]=ti(()=>p(e));let f=ti(()=>!d()),h=ti(()=>"0.0"!==tf()),y=ti(()=>!s||s()),_=ti(()=>e1()&&!tV()&&h()&&f()&&y());return Object.assign((...e)=>{let r=`Unable to call the ${l} ${o?"method":"function"}:`;if(tV()||!e1())throw new t$(`${r} it can't be called outside Mini Apps`);if(!h())throw new t$(`${r} the SDK was not initialized. Use the SDK init() function`);let n=d();if(n)throw new t$(`${r} ${n}`);let a=function(...e){for(let t in u)if(u[t][2](...e)&&!p(t))return`option ${t} is not supported in Mini Apps version ${tf()}`}(...e);if(a)throw new t$(`${r} ${a}`);if(!y()){let e=i&&i()?"mounting. Wait for the mount completion":`unmounted. Use the ${o}.mount() method`;throw new t$(`${r} the component is ${e}`)}return t(...e)},t,{isAvailable:_,ifAvailable:(...e)=>_()?[!0,t(...e)]:[!1]},c?{isSupported:f}:{},n?{supports:n}:{})}function tW(e,t){return t||(t={}),(r,n,a,s)=>tB(r,n,{...t,isSupported:a||t.isSupported,supports:s,component:e})}function tU(e,t,r){return tW(e,{isSupported:r,isMounted:t})}function tz(e,t){return tW(e,{isSupported:t})}let tG="web_app_setup_back_button",tH="back_button_pressed",tJ="backButton",[tZ,tK]=to(!1),[tQ,tY]=to(!1),tX=tm(tG),t0=tU(tJ,tQ,tG),t1=tz(tJ,tG),t6=t0("hide",()=>{t3(!1)}),t2=t1("mount",()=>{tQ()||(t3(tr()&&te(tJ)||!1),tQ.set(!0))});function t3(e){e!==tZ()&&(tb(tG,{is_visible:e}),e8(tJ,e),tZ.set(e))}let t7=t1("onClick",e=>eE(tH,e)),t4=t1("offClick",e=>{ex(tH,e)}),t5=Object.freeze(Object.defineProperty({__proto__:null,hide:t6,isMounted:tY,isSupported:tX,isVisible:tK,mount:t2,offClick:t4,onClick:t7,show:t0("show",()=>{t3(!0)}),unmount:function(){tQ.set(!1)}},Symbol.toStringTag,{value:"Module"}));var t9=Object.defineProperty,t8=(e,t,r)=>t in e?t9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,re=(e,t,r)=>t8(e,"symbol"!=typeof t?t+"":t,r);function rt(e,t){t||(t=[]);class r extends Error{constructor(...r){super(..."function"==typeof t?t(...r):"string"==typeof t?[t]:t||[]),this.name=e}}return Object.defineProperty(r,"name",{value:e}),[r,e=>e instanceof r]}let[rr,rn]=rt("CancelledError","Promise was canceled"),[ra,rs]=rt("TimeoutError",(e,t)=>[`Timeout reached: ${e}ms`,{cause:t}]),ri=Symbol("Resolved");function ro(e){return Array.isArray(e)&&e[0]===ri}function ru(e,t){return e.reject=t.reject,e.abort=t.abort,e}let rl=class e extends Promise{constructor(e,t){let r,n;super((a,s)=>{let i,o;"function"==typeof e?(i=e,o=t):o=e;let u=[],l=e=>(...t)=>{let r=e(...t);return u.forEach(e=>e()),r},c=new AbortController,{signal:p}=c;n=e=>{p.aborted||c.abort(e)};let d=()=>p.reason,f=e=>{let t=()=>{e(d())};p.addEventListener("abort",t,!0);let r=()=>{p.removeEventListener("abort",t,!0)};return u.push(r),r},h=l(e=>{a(e),n([ri,e])});r=l(e=>{s(e),n(e)}),o||(o={});let{abortSignal:y,rejectOnAbort:_=!0}=o;if(y)if(y.aborted){let{reason:e}=y;if(_)return r(e);n(e)}else{let e=()=>{n(y.reason)};y.addEventListener("abort",e),u.push(()=>{y.removeEventListener("abort",e)})}_&&f(s);let{timeout:b}=o;if(b){let e=setTimeout(()=>{n(new ra(b))},b);u.push(()=>{clearTimeout(e)})}let m=()=>p.aborted,g=()=>ro(d()),v=()=>{let e=d();return ro(e)?e[1]:void 0};try{let e=i&&i(h,r,{abortReason:d,abortSignal:p,isAborted:m,isResolved:g,onAborted:f,onResolved:e=>f(()=>{g()&&e(v())}),resolved:v,throwIfAborted(){if(m())throw d()}});e instanceof Promise&&e.catch(r)}catch(e){r(e)}}),re(this,"abort"),re(this,"reject"),this.abort=n,this.reject=r}static fn(t,r){return new e(async(e,r,n)=>{try{e(await t(n))}catch(e){r(e)}},r)}static resolve(e){return this.fn(()=>e)}static reject(t){return new e((e,r)=>{r(t)})}cancel(){this.abort(new rr)}catch(e){return this.then(void 0,e)}finally(e){return ru(super.finally(e),this)}then(e,t){return ru(super.then(e,t),this)}};function rc(e,t){return e.resolve=t.resolve,e}let rp=class e extends rl{constructor(e,t){let r,n,a;"function"==typeof e?(r=e,n=t):n=e,super((e,t,n)=>{a=e,r&&r(e,t,n)},n),re(this,"resolve"),this.resolve=a}static fn(t,r){return new e((e,r,n)=>{try{Promise.resolve(t(n)).then(e,r)}catch(e){r(e)}},r)}static resolve(e){return this.fn(()=>e)}static reject(t){return new e((e,r)=>{r(t)})}catch(e){return this.then(void 0,e)}finally(e){return rc(super.finally(e),this)}then(e,t){return rc(super.then(e,t),this)}};function rd(e,t,r){r||(r={});let{promise:n,error:a}=r,[s,i]=n?[n,ti(n)]:to(),[o,u]=a?[a,ti(a)]:to();return[Object.assign((...r)=>{let n;if(s()){let e=new tP(t);return o.set(e),rl.reject(e)}return tn(()=>{s.set(e(...r)),o.set(void 0)}),s().catch(e=>{throw n=e,e}).finally(()=>{tn(()=>{s.set(void 0),o.set(n)})})},e),[s,i,ti(()=>!!s())],[o,u]]}function rf(e,t,r){let[n,...a]=rd(t,`The ${e} component is already mounting`),[s,i]=to(!1);return[(...e)=>s()?rl.resolve():n(...e).then(e=>{tn(()=>{s.set(!0),r(e)})}),...a,[s,i]]}let[rh,,]=to({available:!1,type:"",accessGranted:!1,accessRequested:!1,deviceId:"",tokenSaved:!1}),ry=(()=>rh().available,"web_app_biometry_get_info"),r_=tB("requestBiometry",e=>t_(ry,"biometry_info_received",e),{isSupported:ry});function rb(e){if(!rn(e))throw e}let rm="biometry",rg="web_app_biometry_request_auth",rv="biometry_info_received",rw=e=>{rH(rE(e))};function rk(){throw new tE("Biometry is not available")}function rE(e){let t=!1,r=!1,n="",a=!1,s="",i=!1;return e.available&&(t=!0,r=e.token_saved,n=e.device_id,a=e.access_requested,s=e.type,i=e.access_granted),{available:t,tokenSaved:r,deviceId:n,type:s,accessGranted:i,accessRequested:a}}tm(rg);let[rx,rS,rA,r$]=rf(rm,e=>{let t=tr()&&te(rm);return t?rl.resolve(t):r_({abortSignal:e}).then(rE)},e=>{eE(rv,rw),rH(e)}),rj=tz(rm,rg),rC=tU(rm,r$[0],rg),[,rq,rP]=(rj("mount",rx),rS),[,rT]=rA,[rI,rO]=r$,[rL,rN,rR]=rd(e=>rl.fn(async t=>{let r=rh();r.available||rk();let n=await t_(rg,"biometry_auth_requested",{...e,...t,params:{reason:((e||{}).reason||"").trim()}}),{token:a}=n;return"string"==typeof a&&rH({...r,token:a}),n},e),"Biometry authentication is already in progress"),[,rD,rM]=(rC("authenticate",rL),rN),[,rF]=rR,[rV,rB,rW]=(rj("openSettings",()=>{tb("web_app_biometry_open_settings")}),rd(e=>rl.fn(async t=>{let r=await t_("web_app_biometry_request_access",rv,{...e,...t,params:{reason:(e||{}).reason||""}}).then(rE);return r.available||rk(),rH(r),r.accessGranted},e),"Biometry access request is already in progress")),[,rU,rz]=(rC("requestAccess",rV),rB),[,rG]=rW;function rH(e){rh.set(e),e8(rm,e)}function rJ(e,t){return tW(e,{isMounted:t})}rC("updateToken",e=>(e||(e={}),t_("web_app_biometry_update_token","biometry_token_updated",{...e,params:{token:e.token||"",reason:e.reason}}).then(e=>e.status))),Symbol.toStringTag;let rZ="closingBehavior",[rK,,]=to(!1),[rQ,rY]=to(!1),rX=rJ(rZ,rY),r0=tW(rZ);function r1(e){e!==rK()&&(tb("web_app_setup_closing_behavior",{need_confirmation:e}),e8(rZ,e),rK.set(e))}function r6(e){return{lang:(null==e?void 0:e.lang)??(null==u?void 0:u.lang),message:null==e?void 0:e.message,abortEarly:(null==e?void 0:e.abortEarly)??(null==u?void 0:u.abortEarly),abortPipeEarly:(null==e?void 0:e.abortPipeEarly)??(null==u?void 0:u.abortPipeEarly)}}function r2(e,t,r,n,a){var s,i,o,u,d;let f=a&&"input"in a?a.input:r.value,h=(null==a?void 0:a.expected)??e.expects??null,y=(null==a?void 0:a.received)??function(e){var t,r;let n=typeof e;return"string"===n?`"${e}"`:"number"===n||"bigint"===n||"boolean"===n?`${e}`:"object"===n||"function"===n?(e&&(null==(r=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:r.name))??"null":n}(f),_={kind:e.kind,type:e.type,input:f,expected:h,received:y,message:`Invalid ${t}: ${h?`Expected ${h} but r`:"R"}eceived ${y}`,requirement:e.requirement,path:null==a?void 0:a.path,issues:null==a?void 0:a.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},b="schema"===e.kind,m=(null==a?void 0:a.message)??e.message??(s=e.reference,i=_.lang,null==(o=null==p?void 0:p.get(s))?void 0:o.get(i))??(b?(u=_.lang,null==c?void 0:c.get(u)):null)??n.message??(d=_.lang,null==l?void 0:l.get(d));m&&(_.message="function"==typeof m?m(_):m),b&&(r.typed=!1),r.issues?r.issues.push(_):r.issues=[_]}function r3(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},r6())}}function r7(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}rX("disableConfirmation",()=>{r1(!1)}),rX("enableConfirmation",()=>{r1(!0)}),r0("mount",()=>{rQ()||(r1(tr()&&te(rZ)||!1),rQ.set(!0))}),Symbol.toStringTag;var r4=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function r5(e){return{kind:"transformation",type:"transform",reference:r5,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function r9(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function r8(e){return{kind:"schema",type:"date",reference:r8,expects:"Date",async:!1,message:e,get"~standard"(){return r3(this)},"~run"(e,t){return e.value instanceof Date?isNaN(e.value)?r2(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:r2(this,"type",e,t),e}}}function ne(e,t){return{kind:"schema",type:"loose_object",reference:ne,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return r3(this)},"~run"(e,t){var r;let n=e.value;if(n&&"object"==typeof n){for(let a in e.typed=!0,e.value={},this.entries){let s=this.entries[a];if(a in n||("exact_optional"===s.type||"optional"===s.type||"nullish"===s.type)&&void 0!==s.default){let i=a in n?n[a]:r9(s),o=s["~run"]({value:i},t);if(o.issues){let s={type:"object",origin:"value",input:n,key:a,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[a]=o.value}else if("exact_optional"!==s.type&&"optional"!==s.type&&"nullish"!==s.type&&(r2(this,"key",e,t,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:n,key:a,value:n[a]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(let t in n)!r7(n,t)||t in this.entries||(e.value[t]=n[t])}else r2(this,"type",e,t);return e}}}function nt(e){return{kind:"schema",type:"number",reference:nt,expects:"number",async:!1,message:e,get"~standard"(){return r3(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?r2(this,"type",e,t):e.typed=!0,e}}}function nr(e){return{kind:"schema",type:"string",reference:nr,expects:"string",async:!1,message:e,get"~standard"(){return r3(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:r2(this,"type",e,t),e}}}function nn(e){let t;if(e)for(let r of e)t?t.push(...r.issues):t=r.issues;return t}function na(e,t,r){let n=e["~run"]({value:t},r6(r));if(n.issues)throw new r4(n.issues);return n.value}function ns(...e){return{...e[0],pipe:e,get"~standard"(){return r3(this)},"~run"(t,r){for(let n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n["~run"](t,r))}return t}}}let ni="web_app_invoke_custom_method",no=tz("cloudStorage",ni),nu=(tm(ni),no("deleteItem",(e,t)=>{let r=Array.isArray(e)?e:[e];return r.length?ty("deleteStorageValues",{keys:r},t).then():rl.resolve()})),nl=(no("getItem",function(e,t){let r=Array.isArray(e)?e:[e];return r.length?ty("getStorageValues",{keys:r},t).then(t=>{let n={...r.reduce((e,t)=>(e[t]="",e),{}),...na(function e(t,r,n){return{kind:"schema",type:"record",reference:e,expects:"Object",async:!1,key:t,value:r,message:n,get"~standard"(){return r3(this)},"~run"(e,t){var r,n;let a=e.value;if(a&&"object"==typeof a){for(let s in e.typed=!0,e.value={},a)if(r7(a,s)){let i=a[s],o=this.key["~run"]({value:s},t);if(o.issues){let n={type:"object",origin:"key",input:a,key:s,value:i};for(let t of o.issues)t.path=[n],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}let u=this.value["~run"]({value:i},t);if(u.issues){let r={type:"object",origin:"value",input:a,key:s,value:i};for(let t of u.issues)t.path?t.path.unshift(r):t.path=[r],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=u.issues),t.abortEarly){e.typed=!1;break}}o.typed&&u.typed||(e.typed=!1),o.typed&&(e.value[o.value]=u.value)}}else r2(this,"type",e,t);return e}}}(nr(),nr()),t)};return"string"==typeof e?n[e]:n}):rl.resolve(Array.isArray(e)?{}:"")}),no("getKeys",e=>ty("getStorageKeys",{},e).then(e=>na(function e(t,r){return{kind:"schema",type:"array",reference:e,expects:"Array",async:!1,item:t,message:r,get"~standard"(){return r3(this)},"~run"(e,t){var r;let n=e.value;if(Array.isArray(n)){e.typed=!0,e.value=[];for(let a=0;a<n.length;a++){let s=n[a],i=this.item["~run"]({value:s},t);if(i.issues){let o={type:"array",origin:"value",input:n,key:a,value:s};for(let t of i.issues)t.path?t.path.unshift(o):t.path=[o],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=i.issues),t.abortEarly){e.typed=!1;break}}i.typed||(e.typed=!1),e.value.push(i.value)}}else r2(this,"type",e,t);return e}}}(nr()),e)))),nc=(no("setItem",(e,t,r)=>ty("saveStorageValue",{key:e,value:t},r).then()),no("clear",e=>nl(e).then(nu)),Symbol.toStringTag,"web_app_trigger_haptic_feedback"),np=tz("hapticFeedback",nc),[nd,nf]=(tm(nc),np("impactOccurred",e=>{tb(nc,{type:"impact",impact_style:e})}),np("notificationOccurred",e=>{tb(nc,{type:"notification",notification_type:e})}),np("selectionChanged",()=>{tb(nc,{type:"selection_change"})}),Symbol.toStringTag,to(void 0));function nh(e){return ti(()=>{let t=nd();return t?t[e]:void 0})}let ny=nh("auth_date"),n_=nh("can_send_after"),nb=(nh("chat"),nh("chat_type"),nh("chat_instance"),nh("hash"),nh("query_id"),nh("receiver"),nh("start_param"),nh("user"),Symbol.toStringTag,"web_app_open_invoice"),nm=tz("invoice",nb),[ng,nv,nw]=(tm(nb),rd(function(e,t,r){let n;if("url"===t){let{hostname:t,pathname:r}=new URL(e,window.location.href);if("t.me"!==t)throw new tC(`Link has unexpected hostname: ${t}`);let a=r.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!a)throw new tC('Expected to receive a link with a pathname in format "/invoice/{slug}" or "/${slug}"');[,,n]=a}else n=e,r=t;return t_(nb,"invoice_closed",{...r,params:{slug:n},capture:e=>n===e.slug}).then(e=>e.status)},"Invoice is already opened")),[,nk,nE]=(nm("open",ng),nv),[,nx]=nw,nS=(Symbol.toStringTag,"locationManager"),nA="web_app_check_location",n$="web_app_open_location_settings",nj=ta({available:!1,accessGranted:!1,accessRequested:!1},void 0);function nC(e){return ti(()=>nj()[e])}function nq(e){let t=!1,r,n;return e.available&&(t=!0,r=e.access_requested,n=e.access_granted),{available:t,accessGranted:n||!1,accessRequested:r||!1}}tm(nA),nC("available"),nC("accessGranted"),nC("accessRequested");let[nP,nT,nI,nO]=rf(nS,e=>{let t=tr()&&te(nS);return t?rl.resolve(t):t_("web_app_check_location","location_checked",e).then(nq)},e=>{nj.set(e),e8(nS,e)}),nL=tz(nS,nA),nN=tU(nS,nO[0],nA),[,nR,nD]=(nL("mount",nP),nT),[,nM]=nI,[nF,nV]=nO,[nB,nW,nU]=rd(e=>t_("web_app_request_location","location_requested",e).then(e=>{if(!e.available)throw nj.set({...nj(),available:!1}),new tE("Location data tracking is not available");let{available:t,...r}=e;return r}),"Location request is currently in progress"),[,nz,nG]=(nN("requestLocation",nB),nW),[,nH]=nU;function nJ(e){let t={};for(let r in e){let n=e[r];void 0!==n&&(t[r]=n)}return t}function nZ(e){return{lang:(null==e?void 0:e.lang)??void 0,message:null==e?void 0:e.message,abortEarly:(null==e?void 0:e.abortEarly)??void 0,abortPipeEarly:(null==e?void 0:e.abortPipeEarly)??void 0}}function nK(e,t,r,n,a){var s,i;let o=a&&"input"in a?a.input:r.value,u=(null==a?void 0:a.expected)??e.expects??null,l=(null==a?void 0:a.received)??function(e){var t,r;let n=typeof e;return"string"===n?`"${e}"`:"number"===n||"bigint"===n||"boolean"===n?`${e}`:"object"===n||"function"===n?(e&&(null==(r=null==(t=Object.getPrototypeOf(e))?void 0:t.constructor)?void 0:r.name))??"null":n}(o),c={kind:e.kind,type:e.type,input:o,expected:u,received:l,message:`Invalid ${t}: ${u?`Expected ${u} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:null==a?void 0:a.path,issues:null==a?void 0:a.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},p="schema"===e.kind,d=(null==a?void 0:a.message)??e.message??(s=e.reference,void(i=c.lang))??(p?void c.lang:null)??n.message??void c.lang;d&&(c.message="function"==typeof d?d(c):d),p&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function nQ(e){return{version:1,vendor:"valibot",validate:t=>e["~run"]({value:t},nZ())}}function nY(e,t){return Object.hasOwn(e,t)&&"__proto__"!==t&&"prototype"!==t&&"constructor"!==t}nL("openSettings",()=>{tb(n$)},n$),Symbol.toStringTag;var nX=class extends Error{constructor(e){super(e[0].message),this.name="ValiError",this.issues=e}};function n0(e){return{kind:"transformation",type:"transform",reference:n0,async:!1,operation:e,"~run"(e){return e.value=this.operation(e.value),e}}}function n1(e,t,r){return"function"==typeof e.default?e.default(t,r):e.default}function n6(e){return{kind:"schema",type:"boolean",reference:n6,expects:"boolean",async:!1,message:e,get"~standard"(){return nQ(this)},"~run"(e,t){return"boolean"==typeof e.value?e.typed=!0:nK(this,"type",e,t),e}}}function n2(e){return{kind:"schema",type:"lazy",reference:n2,expects:"unknown",async:!1,getter:e,get"~standard"(){return nQ(this)},"~run"(e,t){return this.getter(e.value)["~run"](e,t)}}}function n3(e,t){return{kind:"schema",type:"loose_object",reference:n3,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return nQ(this)},"~run"(e,t){var r;let n=e.value;if(n&&"object"==typeof n){for(let a in e.typed=!0,e.value={},this.entries){let s=this.entries[a];if(a in n||("exact_optional"===s.type||"optional"===s.type||"nullish"===s.type)&&void 0!==s.default){let i=a in n?n[a]:n1(s),o=s["~run"]({value:i},t);if(o.issues){let s={type:"object",origin:"value",input:n,key:a,value:i};for(let t of o.issues)t.path?t.path.unshift(s):t.path=[s],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}o.typed||(e.typed=!1),e.value[a]=o.value}else if("exact_optional"!==s.type&&"optional"!==s.type&&"nullish"!==s.type&&(nK(this,"key",e,t,{input:void 0,expected:`"${a}"`,path:[{type:"object",origin:"key",input:n,key:a,value:n[a]}]}),t.abortEarly))break}if(!e.issues||!t.abortEarly)for(let t in n)!nY(n,t)||t in this.entries||(e.value[t]=n[t])}else nK(this,"type",e,t);return e}}}function n7(e){return{kind:"schema",type:"number",reference:n7,expects:"number",async:!1,message:e,get"~standard"(){return nQ(this)},"~run"(e,t){return"number"!=typeof e.value||isNaN(e.value)?nK(this,"type",e,t):e.typed=!0,e}}}function n4(e,t){return{kind:"schema",type:"optional",reference:n4,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return nQ(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=n1(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}function n5(e){return{kind:"schema",type:"string",reference:n5,expects:"string",async:!1,message:e,get"~standard"(){return nQ(this)},"~run"(e,t){return"string"==typeof e.value?e.typed=!0:nK(this,"type",e,t),e}}}function n9(e){let t;if(e)for(let r of e)t?t.push(...r.issues):t=r.issues;return t}function n8(e,t){return{kind:"schema",type:"union",reference:n8,expects:function(e,t){let r=[...new Set(e)];return r.length>1?`(${r.join(" | ")})`:r[0]??"never"}(e.map(e=>e.expects),0),async:!1,options:e,message:t,get"~standard"(){return nQ(this)},"~run"(e,t){let r,n,a;for(let s of this.options){let i=s["~run"]({value:e.value},t);if(i.typed)if(i.issues)n?n.push(i):n=[i];else{r=i;break}else a?a.push(i):a=[i]}if(r)return r;if(n){if(1===n.length)return n[0];nK(this,"type",e,t,{issues:n9(n)}),e.typed=!0}else{if((null==a?void 0:a.length)===1)return a[0];nK(this,"type",e,t,{issues:n9(a)})}return e}}}function ae(e,t,r){let n=e["~run"]({value:t},nZ(r));if(n.issues)throw new nX(n.issues);return n.value}function at(...e){return{...e[0],pipe:e,get"~standard"(){return nQ(this)},"~run"(t,r){for(let n of e)if("metadata"!==n.kind){if(t.issues&&("schema"===n.kind||"transformation"===n.kind)){t.typed=!1;break}t.issues&&(r.abortEarly||r.abortPipeEarly)||(t=n["~run"](t,r))}return t}}}function ar(e){return n0(t=>e?function e(t){let r=Object.entries(t).reduce((e,[t,r])=>(e[t.replace(/_[a-z]/g,e=>e[1].toUpperCase())]=r,e),{});for(let t in r){let n=r[t];!n||"object"!=typeof n||n instanceof Date||(r[t]=Array.isArray(n)?n.map(e):e(n))}return r}(t):t)}function an(e){return t=>at(e,ar(t))}function aa(e){return(t,r)=>ae(at(e,ar(r)),t)}function as(){return n0(JSON.parse)}function ai(e){let t=an(e);return e=>at(n5(),as(),t(e))}function ao(e){return n0(t=>{let r={};return new URLSearchParams(t).forEach((e,t)=>{let n=r[t];Array.isArray(n)?n.push(e):void 0===n?r[t]=e:r[t]=[n,e]}),ae(e,r)})}function au(e){return t=>at(n8([n5(),function e(t,r){return{kind:"schema",type:"instance",reference:e,expects:t.name,async:!1,class:t,message:r,get"~standard"(){return nQ(this)},"~run"(e,t){return e.value instanceof this.class?e.typed=!0:nK(this,"type",e,t),e}}}(URLSearchParams)]),ao(e),ar(t))}let al=n4(n2(()=>ah())),ac=n3({id:n7(),photo_url:n4(n5()),type:n5(),title:n5(),username:n4(n5())}),ap=n3({added_to_attachment_menu:n4(n6()),allows_write_to_pm:n4(n6()),first_name:n5(),id:n7(),is_bot:n4(n6()),is_premium:n4(n6()),last_name:n4(n5()),language_code:n4(n5()),photo_url:n4(n5()),username:n4(n5())}),ad=n3({auth_date:at(n5(),n0(e=>new Date(1e3*Number(e))),function e(t){return{kind:"schema",type:"date",reference:e,expects:"Date",async:!1,message:t,get"~standard"(){return nQ(this)},"~run"(e,t){return e.value instanceof Date?isNaN(e.value)?nK(this,"type",e,t,{received:'"Invalid Date"'}):e.typed=!0:nK(this,"type",e,t),e}}}()),can_send_after:n4(at(n5(),n0(Number),function e(t){return{kind:"validation",type:"integer",reference:e,async:!1,expects:null,requirement:Number.isInteger,message:t,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&nK(this,"integer",e,t),e}}}())),chat:n4(n2(()=>af())),chat_type:n4(n5()),chat_instance:n4(n5()),hash:n5(),query_id:n4(n5()),receiver:al,start_param:n4(n5()),signature:n5(),user:al}),af=ai(ac),ah=ai(ap),ay=au(ad);function a_(e){return/^#[\da-f]{6}$/i.test(e)}let ab=an(function e(t,r,n){return{kind:"schema",type:"record",reference:e,expects:"Object",async:!1,key:t,value:r,message:n,get"~standard"(){return nQ(this)},"~run"(e,t){var r,n;let a=e.value;if(a&&"object"==typeof a){for(let s in e.typed=!0,e.value={},a)if(nY(a,s)){let i=a[s],o=this.key["~run"]({value:s},t);if(o.issues){let n={type:"object",origin:"key",input:a,key:s,value:i};for(let t of o.issues)t.path=[n],null==(r=e.issues)||r.push(t);if(e.issues||(e.issues=o.issues),t.abortEarly){e.typed=!1;break}}let u=this.value["~run"]({value:i},t);if(u.issues){let r={type:"object",origin:"value",input:a,key:s,value:i};for(let t of u.issues)t.path?t.path.unshift(r):t.path=[r],null==(n=e.issues)||n.push(t);if(e.issues||(e.issues=u.issues),t.abortEarly){e.typed=!1;break}}o.typed&&u.typed||(e.typed=!1),o.typed&&(e.value[o.value]=u.value)}}else nK(this,"type",e,t);return e}}}(n5(),at(n8([n5(),n7()]),n0(e=>"number"==typeof e?`#${(0xffffff&e).toString(16).padStart(6,"0")}`:e),function e(t,r){return{kind:"validation",type:"check",reference:e,async:!1,expects:null,requirement:t,message:r,"~run"(e,t){return e.typed&&!this.requirement(e.value)&&nK(this,"input",e,t),e}}}(a_)))),am=n4(at(n5(),n0(e=>"1"===e))),ag=ai(ab()),av=au(n3({tgWebAppBotInline:am,tgWebAppData:n4(ay()),tgWebAppDefaultColors:n4(ag()),tgWebAppFullscreen:am,tgWebAppPlatform:n5(),tgWebAppShowSettings:am,tgWebAppStartParam:n4(n5()),tgWebAppThemeParams:ag(),tgWebAppVersion:n5()}));function aw(e){let t=function(e){let t=e.replace(/\s/g,"").toLowerCase();if(a_(t))return t;if(/^#[\da-f]{3}$/i.test(t)){let e="#";for(let r=0;r<3;r+=1)e+=t[1+r].repeat(2);return e}let r=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!r)throw Error(`Value "${e}" does not satisfy any of known RGB formats.`);return r.slice(1).reduce((e,t)=>e+parseInt(t,10).toString(16).padStart(2,"0"),"#")}(e);return 120>Math.sqrt([.299,.587,.114].reduce((e,r,n)=>{let a=parseInt(t.slice(1+2*n,1+(n+1)*2),16);return e+a*a*r},0))}aa(ay()),aa(av());let[ak,,]=to(!1),[aE,,]=to({});function ax(e){return ti(()=>aE()[e])}ax("accent_text_color");let aS=ax("bg_color"),aA=ax("button_color"),a$=ax("button_text_color"),aj=ax("bottom_bar_bg_color"),aC=(ax("destructive_text_color"),ax("header_bg_color"),ax("hint_color"),ax("link_color"),ax("secondary_bg_color"));function aq(e){return ti(()=>aT()[e])}ax("section_bg_color"),ax("section_header_text_color"),ax("section_separator_color"),ax("subtitle_text_color"),ax("text_color");let aP=ta({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,text:"Continue"},void 0),aT=ti(()=>{let e=aP();return{...e,backgroundColor:e.backgroundColor||aA()||"#2481cc",textColor:e.textColor||a$()||"#ffffff"}}),[aI,aO]=to(!1),aL=(aq("backgroundColor"),aq("hasShineEffect"),aq("isEnabled"),aq("isLoaderVisible"),aq("isVisible"),aq("text"),aq("textColor"),"main_button_pressed"),aN="mainButton",aR=tW(aN),aD=rJ(aN,aO);function aM(e,t){document.documentElement.style.setProperty(e,t)}function aF(e){document.documentElement.style.removeProperty(e)}aR("mount",()=>{if(!aI()){let e=tr()&&te(aN);e&&aP.set(e),aI.set(!0)}}),aR("onClick",e=>eE(aL,e)),aR("offClick",e=>{ex(aL,e)}),aD("setParams",e=>{aP.set({...aP(),...nJ(e)}),e8(aN,aP());let t=aT();t.text&&tb("web_app_setup_main_button",{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,text:t.text,text_color:t.textColor})}),Symbol.toStringTag;let aV="themeParams",aB="theme_changed",aW=tW(aV),aU=({theme_params:e})=>{aE.set(e),e8(aV,e)},[az,aG,aH,aJ]=rf(aV,e=>rl.resolve(tr()&&te(aV)||td().tgWebAppThemeParams||{}),e=>{eE(aB,aU),aE.set(e)}),aZ=(rJ(aV,aJ[0])("bindCssVars",e=>{if(ak())throw new tw;function t(e){Object.entries(aE()).forEach(([t,r])=>{r&&e(t,r)})}function r(){t((t,r)=>{aM(e(t),r)})}return e||(e=e=>`--tg-theme-${e.replace(/_([a-z])/g,(e,t)=>`-${t.toLowerCase()}`)}`),r(),aE.sub(r),ak.set(!0),()=>{t(aF),aE.unsub(r),ak.set(!1)}}),aW("mount",az)),[aK,aQ]=(aG[2],aG[1],aH[1],aJ),aY=aW("mountSync",()=>{if(!aK()){let e=tr()&&te(aV)||td().tgWebAppThemeParams||{};eE(aB,aU),tn(()=>{aE.set(e),aK.set(!0)})}});function aX(e){return ti(()=>{let t=e();return a_(t)?t:"bg_color"===t?aS():aC()})}Symbol.toStringTag;let[a0,,]=to("bg_color"),a1=aX(a0),[a6,,]=to("bottom_bar_bg_color"),a2=ti(()=>{let e=a6();return a_(e)?e:"bottom_bar_bg_color"===e?aj()||aC():"secondary_bg_color"===e?aC():aS()}),[a3,,]=to("bg_color"),a7=aX(a3),[a4,,]=to(!1),[a5,,]=(()=>{let e=a1();return!!e&&aw(e)},to(!0)),a9=ti(()=>({backgroundColor:a0(),bottomBarColor:a6(),headerColor:a3(),isActive:a5()})),a8="web_app_set_background_color",se="web_app_set_bottom_bar_color",st="web_app_set_header_color",sr="visibility_changed",sn="miniApp",sa={any:[a8,se,st]},ss=(()=>sa.any.some(e=>e4(e,tf())),e=>{a5.set(e.is_visible),sy()}),[si,so,su,sl]=rf(sn,e=>aZ(e).then(()=>tr()&&te(sn)||void 0),e=>{s_.ifAvailable(e?e.backgroundColor:"bg_color"),sb.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),sm.ifAvailable(e?e.headerColor:"bg_color"),a5.set(!e||e.isActive),eE(sr,ss)}),sc=tW(sn),sp=tz(sn,sa),sd=tU(sn,sl[0],sa),[sf,sh]=(sd("bindCssVars",e=>{if(a4())throw new tw;let[t,r]=tt();function n(e,r){function n(){aM(e,r()||null)}n(),t(r.sub(n),aF.bind(null,e))}return e||(e=e=>`--tg-${e5(e)}`),n(e("bgColor"),a1),n(e("bottomBarColor"),a2),n(e("headerColor"),a7),t(()=>{a4.set(!1)}),a4.set(!0),r}),sc("close",e=>{tb("web_app_close",{return_back:e})}),sp("mount",si),so[2],so[1],su[1],sl);function sy(){e8(sn,a9())}sp("mountSync",()=>{if(!sf()){aY();let e=tr()&&te(sn)||void 0;s_.ifAvailable(e?e.backgroundColor:"bg_color"),sb.ifAvailable(e?e.bottomBarColor:"bottom_bar_bg_color"),sm.ifAvailable(e?e.headerColor:"bg_color"),eE(sr,ss),tn(()=>{a5.set(!e||e.isActive),sf.set(!0)})}}),sc("ready",()=>{tb("web_app_ready")});let s_=sd("setBackgroundColor",e=>{e!==a0()&&(tb(a8,{color:e}),a0.set(e),sy())},a8),sb=sd("setBottomBarColor",e=>{e!==a6()&&(tb(se,{color:e}),a6.set(e),sy())},se),sm=sd("setHeaderColor",e=>{e!==a3()&&(tb(st,a_(e)?{color:e}:{color_key:e}),a3.set(e),sy())},st,{rgb:[st,"color",a_]});Symbol.toStringTag;let sg="web_app_open_popup",sv=tz("popup",sg),[sw,sk,sE]=(tm(sg),rd(e=>t_(sg,"popup_closed",{...e,params:function(e){let t=e.message.trim(),r=(e.title||"").trim(),n=e.buttons||[];if(r.length>64)throw new tC(`Invalid title: ${r}`);if(!t||t.length>256)throw new tC(`Invalid message: ${t}`);if(n.length>3)throw new tC(`Invalid buttons count: ${n.length}`);return{title:r,message:t,buttons:n.length?n.map((e,t)=>{let r=e.id||"";if(r.length>64)throw new tC(`Button with index ${t} has invalid id: ${r}`);if(!e.type||"default"===e.type||"destructive"===e.type){let n=e.text.trim();if(!n||n.length>64)throw new tC(`Button with index ${t} has invalid text: ${n}`);return{type:e.type,text:n,id:r}}return{type:e.type,id:r}}):[{type:"close",id:""}]}}(e)}).then(({button_id:e})=>void 0===e?null:e),"A popup is already opened")),[,sx,sS]=(sv("open",sw),sk[1],sk[2],sE[1],sv("show",sw),sk),[,sA]=sE,s$=(Symbol.toStringTag,"web_app_close_scan_qr_popup"),sj="web_app_open_scan_qr_popup",sC=tz("qrScanner",sj),[sq,sP,sT]=(sC("close",()=>{tb(s$),function(e){let t=e();t&&t.catch(rb).cancel()}(sI)}),tm(sj),rd(function(e){e||(e={});let{onCaptured:t,text:r,capture:n}=e,[,a]=tt(eE("scan_qr_popup_closed",()=>{s.resolve()}),eE("qr_text_received",e=>{t?t(e.data):(!n||n(e.data))&&(s.resolve(e.data),tb(s$))})),s=new rp(e);return(e.postEvent||tb)(sj,{text:r}),rl.resolve(s).catch(rb).finally(a)},"The QR Scanner is already opened")),[,sI,sO]=(sC("open",sq),sP),[,sL]=sT;function sN(e){return ti(()=>sD()[e])}Symbol.toStringTag;let sR=ta({hasShineEffect:!1,isEnabled:!0,isLoaderVisible:!1,isVisible:!1,position:"left",text:"Cancel"},void 0),sD=ti(()=>{let e=sR();return{...e,backgroundColor:e.backgroundColor||a2()||"#000000",textColor:e.textColor||aA()||"#2481cc"}}),[sM,sF]=to(!1),sV=(sN("backgroundColor"),sN("hasShineEffect"),sN("isEnabled"),sN("isLoaderVisible"),sN("isVisible"),sN("position"),sN("text"),sN("textColor"),"web_app_setup_secondary_button"),sB="secondary_button_pressed",sW="secondaryButton",sU=tz(sW,sV),sz=tU(sW,sF,sV);tm(sV),sU("mount",()=>{if(!sM()){let e=tr()&&te(sW);e&&sR.set(e),sM.set(!0)}}),sU("onClick",e=>eE(sB,e)),sU("offClick",e=>{ex(sB,e)}),sz("setParams",e=>{sR.set({...sR(),...nJ(e)}),e8(sW,sR());let t=sD();t.text&&tb(sV,{color:t.backgroundColor,has_shine_effect:t.hasShineEffect,is_active:t.isEnabled,is_progress_visible:t.isLoaderVisible,is_visible:t.isVisible,position:t.position,text:t.text,text_color:t.textColor})}),Symbol.toStringTag;let sG="web_app_setup_settings_button",sH="settings_button_pressed",sJ="settingsButton",[sZ,,]=to(!1),[sK,,]=to(!1),sQ=(tm(sG),tz(sJ,sG)),sY=tU(sJ,sK,sG);function sX(e){e!==sZ()&&(tb(sG,{is_visible:e}),e8(sJ,e),sZ.set(e))}sY("hide",()=>{sX(!1)}),sQ("mount",()=>{sK()||(sX(tr()&&te(sJ)||!1),sK.set(!0))}),sQ("onClick",e=>eE(sH,e)),sQ("offClick",e=>{ex(sH,e)}),sY("show",()=>{sX(!0)}),Symbol.toStringTag;let s0="web_app_setup_swipe_behavior",s1="swipeBehavior",[s6,,]=to(!1),[s2,,]=(tm(s0),to(!0)),s3=tz(s1,s0),s7=tU(s1,s6,s0);function s4(e,t){(e!==s2()||t)&&(tb(s0,{allow_vertical_swipe:e}),e8(s1,e),s2.set(e))}s7("disableVertical",()=>{s4(!1)}),s7("enableVertical",()=>{s4(!0)}),s3("mount",()=>{s6()||(s4(tr()&&te(s1)||!1,!0),s6.set(!0))}),Symbol.toStringTag;let s5="viewport",s9="fullscreen_changed",s8="safe_area_changed",ie="content_safe_area_changed",it="viewport_changed",ir=tW(s5),ia={left:0,top:0,bottom:0,right:0};function is(e){return Math.max(e,0)}let[ii,io]=to({contentSafeAreaInsets:ia,height:0,isExpanded:!1,isFullscreen:!1,safeAreaInsets:ia,stableHeight:0,width:0});function iu(e){return ti(()=>io()[e])}let il=iu("height"),ic=iu("stableHeight"),ip=iu("width");function id(e){let{height:t,stableHeight:r,width:n}=e;ii.set({...ii(),...nJ({...e,height:t?is(t):void 0,width:n?is(n):void 0,stableHeight:r?is(r):void 0})}),e8(s5,ii())}function ih(e){return ti(()=>iy()[e])}iu("isExpanded"),()=>il()===ic();let iy=iu("contentSafeAreaInsets"),i_=ih("bottom"),ib=ih("left"),im=ih("right"),ig=ih("top");function iv(e){return ti(()=>iw()[e])}let iw=iu("safeAreaInsets"),ik=iv("bottom"),iE=iv("left"),ix=iv("right"),iS=iv("top"),iA="web_app_request_safe_area",i$=tz(s5,iA),ij=i$("requestContentSafeAreaInsets",e=>t_("web_app_request_content_safe_area",ie,e)),iC=i$("requestSafeAreaInsets",e=>t_(iA,s8,e)),iq=e=>{let{height:t}=e;id({isExpanded:e.is_expanded,height:t,width:e.width,stableHeight:e.is_state_stable?t:void 0})},iP=e=>{id({isFullscreen:e.is_fullscreen})},iT=e=>{id({safeAreaInsets:e})},iI=e=>{id({contentSafeAreaInsets:e})},[iO,iL,iN,iR]=rf(s5,e=>{let t=tr()&&te(s5);return t?rl.resolve(t):rl.fn(async e=>{let t=await rl.all([iC.isAvailable()?iC(e):iw(),ij.isAvailable()?ij(e):iy()]),r=td(),n={contentSafeAreaInsets:t[1],isFullscreen:!!r.tgWebAppFullscreen,safeAreaInsets:t[0]};if(["macos","tdesktop","unigram","webk","weba","web"].includes(r.tgWebAppPlatform)){let e=window;return{...n,height:e.innerHeight,isExpanded:!0,stableHeight:e.innerHeight,width:e.innerWidth}}return t_("web_app_request_viewport",it,e).then(e=>({...n,height:e.height,isExpanded:e.is_expanded,stableHeight:e.is_state_stable?e.height:0,width:e.width}))},e)},e=>{eE(it,iq),eE(s9,iP),eE(s8,iT),eE(ie,iI),id(e)}),[,iD,iM]=(ir("mount",iO),iL),[,iF]=iN,[iV,iB]=iR,iW=rJ(s5,iV),[iU,,]=to(!1),iz=(iW("bindCssVars",e=>{if(iU())throw new tw;e||(e=e=>`--tg-viewport-${e5(e)}`);let t=[["height",il],["stableHeight",ic],["width",ip],["safeAreaInsetTop",iS],["safeAreaInsetBottom",ik],["safeAreaInsetLeft",iE],["safeAreaInsetRight",ix],["contentSafeAreaInsetTop",ig],["contentSafeAreaInsetBottom",i_],["contentSafeAreaInsetLeft",ib],["contentSafeAreaInsetRight",im]].reduce((t,[r,n])=>{let a=e(r);if(a){let e=()=>{aM(a,`${n()}px`)};t.push([e,n.sub(e),a])}return t},[]);return t.forEach(e=>{e[0]()}),iU.set(!0),()=>{t.forEach(e=>{e[1](),aF(e[2])}),iU.set(!1)}}),ir("expand",()=>{tb("web_app_expand")}),"web_app_request_fullscreen"),iG=tU(s5,iV,iz),iH=iu("isFullscreen"),[iJ,,]=to(),[iZ,,]=to();function iK(e,t){return iG(e,rd(e=>t_(t?iz:"web_app_exit_fullscreen",[s9,"fullscreen_failed"],e).then(e=>{if("error"in e&&"ALREADY_FULLSCREEN"!==e.error)throw new tR(e.error);let t=!("is_fullscreen"in e)||e.is_fullscreen;t!==iH()&&id({isFullscreen:t})}),"Fullscreen mode change is already being requested",{promise:iJ,error:iZ})[0])}iK("requestFullscreen",!0);let iQ=(iK("exitFullscreen"),Symbol.toStringTag,"web_app_request_emoji_status_access"),[iY,iX,i0]=rd(e=>t_(iQ,"emoji_status_access_requested",e).then(e=>e.status),"Emoji status access request is already in progress"),[,i1,i6]=iX,[,i2]=i0,[i3,i7,i4]=rd((e,t)=>t_("web_app_set_emoji_status",["emoji_status_set","emoji_status_failed"],{params:{custom_emoji_id:e,duration:(t||{}).duration},...t}).then(e=>{if(e&&"error"in e)throw new tI(e.error)}),"Emoji status set request is currently in progress"),[,i5,i9]=i7,[,i8]=i4,oe=((e,t)=>eE("home_screen_failed",e,t),"web_app_add_to_home_screen"),ot=(()=>{tb(oe)},"web_app_check_home_screen"),[or,on,oa]=rd(e=>t_(ot,"home_screen_checked",e).then(e=>e.status||"unknown"),"Check home screen status request is currently in progress"),[,os,oi]=on,[,oo]=oa,ou=(tW()("openLink",(e,t)=>{if("string"==typeof e)try{e=new URL(e)}catch(t){throw new tC(`"${e.toString()}" is invalid URL`,t)}t||(t={}),tb("web_app_open_link",{url:e.toString(),try_browser:t.tryBrowser,try_instant_view:t.tryInstantView})}),"web_app_open_tg_link"),ol=tW()("openTelegramLink",e=>{let t=e.toString();if(!t.match(/^https:\/\/t.me\/.+/))throw new tC(`"${t}" is invalid URL`);if(!e4(ou,tf())){window.location.href=t;return}tb(ou,{path_full:(e=new URL(e)).pathname+e.search})});tW()("shareURL",(e,t)=>{ol("https://t.me/share/url?"+new URLSearchParams({url:e,text:t||""}).toString().replace(/\+/g,"%20"))});let oc="web_app_request_phone",[op,od,of]=rd(e=>t_(oc,"phone_requested",e).then(e=>e.status),"Phone access request is currently in progress"),oh=tB("requestPhoneAccess",op,{isSupported:oc}),[,oy,o_]=od,[,ob]=of;async function om(e){let t=await ty("getRequestedContact",{},{...e,timeout:(e||{}).timeout||5e3});return na(ns(function e(t,r){return{kind:"schema",type:"union",reference:e,expects:function(e,t){let r=[...new Set(e)];return r.length>1?`(${r.join(" | ")})`:r[0]??"never"}(t.map(e=>e.expects),0),async:!1,options:t,message:r,get"~standard"(){return r3(this)},"~run"(e,t){let r,n,a;for(let s of this.options){let i=s["~run"]({value:e.value},t);if(i.typed)if(i.issues)n?n.push(i):n=[i];else{r=i;break}else a?a.push(i):a=[i]}if(r)return r;if(n){if(1===n.length)return n[0];r2(this,"type",e,t,{issues:nn(n)}),e.typed=!0}else{if((null==a?void 0:a.length)===1)return a[0];r2(this,"type",e,t,{issues:nn(a)})}return e}}}([nr(),function e(t,r){return{kind:"schema",type:"instance",reference:e,expects:t.name,async:!1,class:t,message:r,get"~standard"(){return r3(this)},"~run"(e,t){return e.value instanceof this.class?e.typed=!0:r2(this,"type",e,t),e}}}(URLSearchParams)]),ao(ne({contact:ns(nr(),as(),ne({user_id:nt(),phone_number:nr(),first_name:nr(),last_name:function e(t,r){return{kind:"schema",type:"optional",reference:e,expects:`(${t.expects} | undefined)`,async:!1,wrapped:t,default:r,get"~standard"(){return r3(this)},"~run"(e,t){return void 0===e.value&&(void 0!==this.default&&(e.value=r9(this,e,t)),void 0===e.value)?(e.typed=!0,e):this.wrapped["~run"](e,t)}}}(nr())})),auth_date:ns(nr(),r5(e=>new Date(1e3*Number(e))),r8()),hash:nr()}))),t)}let[og,ov,ow]=rd(e=>new rl(async(e,t,r)=>{try{return e(await om(r))}catch(e){if(e instanceof r4)throw e}if(await oh(r)!=="sent")throw new tL("User denied access");let n=50;for(;!r.isAborted();){try{return e(await om(r))}catch(e){if(e instanceof r4)throw e}await new rl({abortSignal:void 0,timeout:n}).catch(()=>{}),n+=50}},e),"Contact is already being requested"),[,ok,oE]=ov,[,ox]=ow,[oS,oA,o$]=rd(e=>t_("web_app_request_write_access","write_access_requested",e).then(e=>e.status),"Write access request is currently in progress"),[,oj,oC]=oA,[,oq]=o$,oP=((e,t,r)=>t_("web_app_request_file_download","file_download_requested",{...r,params:{url:e,file_name:t}}).then(e=>{if("downloading"!==e.status)throw new tL("User denied the action")}),"web_app_read_text_from_clipboard"),oT=(e=>{let t=th();return t_(oP,"clipboard_text_received",{...e,params:{req_id:t},capture:e2(t)}).then(({data:e=null})=>e)},"web_app_data_send"),oI=(e=>{let{size:t}=new Blob([e]);if(!t||t>4096)throw new tC(t?"Maximum size of data to send is 4096 bytes":"Attempted to send empty data");tb(oT,{data:e})},"web_app_send_prepared_message"),oO=((e,t)=>t_(oI,["prepared_message_failed","prepared_message_sent"],{...t,params:{id:e}}).then(e=>{if(e&&"error"in e)throw new tM(e.error)}),"web_app_share_to_story");function oL(e){var t=e;t||(t={});let{postEvent:r}=t,n=t.launchParams||e0();tp.set(n),tc.set("function"==typeof r?r:function(e,t){t||(t="strict");let r="function"==typeof t?t:e=>{let{method:r,version:n}=e,a="param"in e?new eO(r,e.param,n):new eT(r,n);if("strict"===t)throw a;return console.warn(a.message)};return(t,n)=>e4(t,e)?"web_app_set_header_color"===t&&h(b({color:function e(){return{kind:"schema",type:"any",reference:e,expects:"any",async:!1,get"~standard"(){return i(this)},"~run":e=>(e.typed=!0,e)}}()}),n)&&!e4(t,"color",e)?r({version:e,method:t,param:"color"}):eZ(t,n):r({version:e,method:t})}(n.tgWebAppVersion)),tu(!1,"The package was configured. Launch params:",tp());let[a,s]=tt(eE("reload_iframe",()=>{tu(!1,"Received a request to reload the page"),tb("iframe_will_reload"),window.location.reload()})),{acceptCustomStyles:o=!0}=e||{};if(o){let e=document.createElement("style");e.id="telegram-custom-styles",document.head.appendChild(e),a(eE("set_custom_style",t=>{e.innerHTML=t}),()=>{document.head.removeChild(e)})}return tb("iframe_ready",{reload_supported:!0}),tu(!1,"The package was initialized"),s}}}]);